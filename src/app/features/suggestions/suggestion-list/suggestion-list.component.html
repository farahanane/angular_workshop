<div class="container my-4">

  <!-- Title + Add Button -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-0">
      Liste des suggestions
    </h2>

    <!-- ADD BUTTON -->
    <button
      class="btn btn-success"
      routerLink="/suggestions/add"
    >
      â• Ajouter suggestion
    </button>
  </div>

  <!-- Search bar -->
  <input
    type="text"
    class="form-control mb-4"
    placeholder="Rechercher une suggestion"
    [(ngModel)]="searchText"
  />

  <!-- Suggestions list -->
  <ng-container *ngFor="let s of suggestions">

    <div
      class="card shadow-sm mb-4"
      *ngIf="
        s.title.toLowerCase().includes(searchText.toLowerCase()) ||
        s.category.toLowerCase().includes(searchText.toLowerCase())
      "
    >
      <div class="card-body">

        <!-- Title -->
        <h5 class="card-title fw-bold">
          {{ s.title }}
        </h5>

        <!-- Category + Date -->
        <small class="text-primary fw-semibold">
          {{ s.category }}
        </small>
        <small class="text-muted ms-2">
          {{ s.date | date:'dd MMM yyyy' }}
        </small>

        <!-- Description -->
        <p class="mt-3">
          {{ s.description }}
        </p>

        <!-- Status badge -->
        <span
          class="badge"
          [ngClass]="{
            'bg-success': s.status === 'acceptee',
            'bg-danger': s.status === 'refusee',
            'bg-warning text-dark': s.status === 'en_attente'
          }"
        >
          {{ s.status | uppercase }}
        </span>

        <!-- Action buttons -->
        <div class="mt-3 d-flex align-items-center gap-2"
             *ngIf="s.status !== 'refusee'">

          <!-- LIKE -->
          <button
            class="btn btn-primary"
            (click)="likeSuggestion(s)"
          >
            ğŸ‘ Like {{ s.nbLikes }}
          </button>

          <!-- FAVORITES -->
          <button
            class="btn btn-outline-secondary"
            (click)="addToFavorites(s)"
          >
            â™¡ Ajouter aux favoris
          </button>

          <!-- DETAILS BUTTON -->
          <button
            class="btn btn-outline-info"
            [routerLink]="['/suggestions', s.id]"
          >
            ğŸ” Details
          </button>

        </div>

      </div>
    </div>

  </ng-container>

</div>
